import projectConfig from '/pagic.config.js';
export default {
    config: { "root": "/", ...projectConfig, branch: 'master' },
    'pagePath': "posts/archlinux_tutorial.md",
    'layoutPath': "posts/_layout.tsx",
    'outputPath': "posts/archlinux_tutorial.html",
    'title': "Arch Linux 完全指北",
    'content': React.createElement("article", { dangerouslySetInnerHTML: {
            __html: '<h1>Arch Linux 完全指北</h1>\n<p>此文为博主自身在安装 Arch Linux 过程中的总结。主要参考 <a href="https://wiki.archlinux.org/">Arch Wiki</a>，本文章具有一定时效性，里面的内容可能在以后的某个时间失效。\n如果遇到错误，请参考最新版本的官方文档，或通过通过网络寻求帮助。</p>\n<p><strong>本文默认安装单系统，有线网络环境，系统使用 UEFI 模式启动，禁用 Secure Boot。</strong></p>\n<h2 id="%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87">安装前准备<a class="anchor" href="#%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87">§</a></h2>\n<ul>\n<li>下载安装镜像，推荐使用国内清华大学镜像站（<a href="https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest/">TUNA</a>），也可以通过 <a href="https://archlinux.org/download/">Arch 官方下载页面</a>，选择最符合自己网络状况的镜像站。</li>\n<li>下载完毕后，需要将镜像文件刻录至U盘中，Linux 下可以使用 <code>dd</code> 命令完成，Windows 平台下推荐使用 <a href="https://rufus.ie/">Rufus</a>。</li>\n</ul>\n<h2 id="%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85">开始安装<a class="anchor" href="#%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85">§</a></h2>\n<p>插入刚刚完成刻录的U盘，在开机时选择从U盘启动。通过 Arch 的引导界面进入 Live 环境。</p>\n<h3 id="%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5">网络检查<a class="anchor" href="#%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5">§</a></h3>\n<p>进入环境后，检查网络接口</p>\n<pre class="language-autoit"><code class="language-autoit"># ip link\n</code></pre>\n<p>使用 <code>ping</code> 命令检查网络</p>\n<pre class="language-autoit"><code class="language-autoit"># ping www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com\n</code></pre>\n<h3 id="%E5%90%8C%E6%AD%A5%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4">同步系统时间<a class="anchor" href="#%E5%90%8C%E6%AD%A5%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4">§</a></h3>\n<p>更新系统时钟</p>\n<pre class="language-autoit"><code class="language-autoit"># timedatectl set<span class="token operator">-</span>ntp <span class="token boolean">true</span>\n</code></pre>\n<p>完成设置后可以使用如下命令查看服务状态</p>\n<pre class="language-autoit"><code class="language-autoit"># timedatectl status\n</code></pre>\n<h3 id="%E5%88%86%E5%8C%BA%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8F%8A%E6%8C%82%E8%BD%BD">分区格式化及挂载<a class="anchor" href="#%E5%88%86%E5%8C%BA%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8F%8A%E6%8C%82%E8%BD%BD">§</a></h3>\n<p>查看系统磁盘当前状态</p>\n<pre class="language-autoit"><code class="language-autoit"># fdisk <span class="token operator">-</span>l\n</code></pre>\n<p>或者</p>\n<pre class="language-autoit"><code class="language-autoit"># lsblk\n</code></pre>\n<p>如果硬盘被成功识别，会出现 <code>/dev/sda</code>， <code>/dev/nvme0n1</code> 之类的硬盘设备文件。这里假设硬盘设备为 <code>/dev/sda</code>。采用最基本的分区方式。</p>\n<p>使用 <code>cfdisk</code> 命令进行分区，也可使用 <code>parted</code>，根据个人喜好选择。</p>\n<pre class="language-autoit"><code class="language-autoit"># cfdisk <span class="token operator">/</span>dev<span class="token operator">/</span>sda\n</code></pre>\n<p>分区方式如下：</p>\n<div class="table_wrapper"><table>\n<thead>\n<tr>\n<th>分区类型</th>\n<th>分区</th>\n<th>分区大小</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>efi分区</td>\n<td>/dev/sda1</td>\n<td>512M</td>\n</tr>\n<tr>\n<td>swap分区</td>\n<td>/dev/sda2</td>\n<td>实际内存大小</td>\n</tr>\n<tr>\n<td>root分区</td>\n<td>/dev/sda3</td>\n<td>磁盘剩余空间</td>\n</tr>\n</tbody>\n</table></div>\n<p>格式化分区</p>\n<pre class="language-autoit"><code class="language-autoit"># mkfs<span class="token punctuation">.</span>vfat <span class="token operator">-</span>F32 <span class="token operator">/</span>dev<span class="token operator">/</span>sda1\n# mkfs<span class="token punctuation">.</span>swap <span class="token operator">/</span>dev<span class="token operator">/</span>sda2\n# swapon <span class="token operator">/</span>dev<span class="token operator">/</span>sda2\n# mkfs<span class="token punctuation">.</span>ext4 <span class="token operator">/</span>dev<span class="token operator">/</span>sda3\n</code></pre>\n<p>挂载格式化完成的分区</p>\n<pre class="language-autoit"><code class="language-autoit"># mount <span class="token operator">/</span>dev<span class="token operator">/</span>sda3 <span class="token operator">/</span>mnt\n# mkdir <span class="token operator">/</span>mnt<span class="token operator">/</span>boot\n# mount <span class="token operator">/</span>dev<span class="token operator">/</span>sda1 <span class="token operator">/</span>mnt<span class="token operator">/</span>boot\n</code></pre>\n<p>挂载完毕后可以使用 <code>df</code> 命令查看挂载是否正确</p>\n<h3 id="%E6%9B%B4%E6%94%B9%E9%95%9C%E5%83%8F%E6%BA%90">更改镜像源<a class="anchor" href="#%E6%9B%B4%E6%94%B9%E9%95%9C%E5%83%8F%E6%BA%90">§</a></h3>\n<p>查看 <code>/etc/pacman.d/mirrorlist</code> 文件，将最符合当前网络状况的镜像网址放在列表的最前。</p>\n<h3 id="%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F">安装系统<a class="anchor" href="#%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F">§</a></h3>\n<pre class="language-autoit"><code class="language-autoit"># pacstrap <span class="token operator">/</span>mnt base linux linux<span class="token operator">-</span>firmware\n</code></pre>\n<h3 id="%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F">配置系统<a class="anchor" href="#%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F">§</a></h3>\n<p>生成 fstab 文件</p>\n<pre class="language-autoit"><code class="language-autoit"># genfstab <span class="token operator">-</span>U <span class="token operator">/</span>mnt <span class="token operator">></span><span class="token operator">></span> <span class="token operator">/</span>mnt<span class="token operator">/</span>etc<span class="token operator">/</span>fstab\n</code></pre>\n<p>查看生成的 fstab 文件是否正确</p>\n<pre class="language-autoit"><code class="language-autoit"># cat <span class="token operator">/</span>mnt<span class="token operator">/</span>etc<span class="token operator">/</span>fstab\n</code></pre>\n<p>进入新安装的系统环境</p>\n<pre class="language-autoit"><code class="language-autoit"># arch<span class="token operator">-</span>chroot <span class="token operator">/</span>mnt\n</code></pre>\n<blockquote>\n<p>因为后面有些配置需要操作文本，这里可以先安装 vim 方便后面编辑</p>\n</blockquote>\n<p>设置时区</p>\n<pre class="language-autoit"><code class="language-autoit"># ln <span class="token operator">-</span>sf <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>zoneinfo<span class="token operator">/</span>Asia<span class="token operator">/</span>Shanghai <span class="token operator">/</span>etc<span class="token operator">/</span>localtime\n</code></pre>\n<p>生成 <code>/etc/adjtime</code></p>\n<pre class="language-autoit"><code class="language-autoit"># hwclock <span class="token operator">-</span><span class="token operator">-</span>systohc\n</code></pre>\n<p>编辑 <code>/etc/locale.gen</code>，去掉 <code>en_US.UTF-8 UTF-8</code> 这一行的注释。</p>\n<blockquote>\n<p>因为使用中文字体会导致 tty 出现错误，这里只使用英文字体</p>\n</blockquote>\n<p>生成 locale 信息</p>\n<pre class="language-autoit"><code class="language-autoit"># locale<span class="token operator">-</span>gen\n</code></pre>\n<p>创建 <code>locale.conf</code> 并在文件中加入 <code>LANG=en_US.UTF-8</code></p>\n<h3 id="%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE">网络配置<a class="anchor" href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE">§</a></h3>\n<p>设置主机名</p>\n<pre class="language-autoit"><code class="language-autoit"># echo hostname <span class="token operator">></span><span class="token operator">></span> <span class="token operator">/</span>etc<span class="token operator">/</span>hostname\n</code></pre>\n<p>创建 <code>/etc/hosts</code> 并加入以下内容</p>\n<pre class="language-autoit"><code class="language-autoit"><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span>  localhost\n<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">1</span>    localhost\n<span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">1.1</span>  myhostname<span class="token punctuation">.</span>localdomain  myhostname\n</code></pre>\n<p>安装 <code>dhcpcd</code> 并启用</p>\n<pre class="language-autoit"><code class="language-autoit"># pacman <span class="token operator">-</span>S dhcpcd\n# systemctl enable dhcpcd\n# systemctl start dhcpcd\n</code></pre>\n<h3 id="%E5%BC%95%E5%AF%BC%E9%85%8D%E7%BD%AE">引导配置<a class="anchor" href="#%E5%BC%95%E5%AF%BC%E9%85%8D%E7%BD%AE">§</a></h3>\n<p>安装引导工具包以及 CPU 微码。微码需要根据自己使用的 CPU 来选择。Intel 用户安装 <code>intel-ucode</code>，AMD 用户安装 <code>amd-ucode</code>。</p>\n<pre class="language-autoit"><code class="language-autoit"># pacman <span class="token operator">-</span>S grub efibootmgr\n# pacman <span class="token operator">-</span>S amd<span class="token operator">-</span>ucode\n</code></pre>\n<p>安装 GRUB</p>\n<pre class="language-autoit"><code class="language-autoit"># grub<span class="token operator">-</span>install <span class="token operator">-</span><span class="token operator">-</span>target<span class="token operator">=</span>x86_64<span class="token operator">-</span>efi <span class="token operator">-</span><span class="token operator">-</span>efi<span class="token operator">-</span>directory<span class="token operator">=</span><span class="token operator">/</span>boot <span class="token operator">-</span><span class="token operator">-</span>bootloader<span class="token operator">-</span>id<span class="token operator">=</span>GRUB\n</code></pre>\n<p>生成主配置文件</p>\n<pre class="language-autoit"><code class="language-autoit"># grub<span class="token operator">-</span>mkconfig <span class="token operator">-</span>o <span class="token operator">/</span>boot<span class="token operator">/</span>grub<span class="token operator">/</span>grub<span class="token punctuation">.</span>cfg\n</code></pre>\n<h3 id="%E6%9D%82%E9%A1%B9">杂项<a class="anchor" href="#%E6%9D%82%E9%A1%B9">§</a></h3>\n<p>给 root 用户设置密码以便重启后登陆</p>\n<pre class="language-autoit"><code class="language-autoit"># passwd\n</code></pre>\n<p>退出 chroot 环境</p>\n<pre class="language-autoit"><code class="language-autoit"># <span class="token keyword">exit</span>\n</code></pre>\n<p>卸载挂载的分区</p>\n<pre class="language-autoit"><code class="language-autoit"># umount <span class="token operator">-</span>R <span class="token operator">/</span>mnt\n</code></pre>\n<p>重启系统</p>\n<pre class="language-autoit"><code class="language-autoit"># reboot\n</code></pre>\n<h2 id="%E6%96%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">新系统的基本配置<a class="anchor" href="#%E6%96%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">§</a></h2>\n<p>重启完成后使用 root 账户和刚刚设置的密码进入系统，首先通过 <code>ping</code> 命令测试网络是否已连接，如果未能连接，查看 <code>dhcpcd</code> 的服务是否正常运行。</p>\n<p>更新软件仓库</p>\n<pre class="language-autoit"><code class="language-autoit"># pacman <span class="token operator">-</span>Syyu\n</code></pre>\n<h3 id="%E9%85%8D%E7%BD%AE-archlinuxcn-%E4%BB%93%E5%BA%93">配置 Archlinuxcn 仓库<a class="anchor" href="#%E9%85%8D%E7%BD%AE-archlinuxcn-%E4%BB%93%E5%BA%93">§</a></h3>\n<p>在 <code>/etc/pacman.conf</code> 文件底部加入以下内容</p>\n<pre class="language-autoit"><code class="language-autoit"><span class="token punctuation">[</span>archlinuxcn<span class="token punctuation">]</span>\nServer <span class="token operator">=</span> https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>archlinuxcn<span class="token operator">/</span><span class="token variable">$arch</span>\n</code></pre>\n<p>刷新软件仓库并安装 <code>archlinuxcn-keyring</code> 导入 <code>GPG-key</code></p>\n<pre class="language-autoit"><code class="language-autoit"># pacman <span class="token operator">-</span>Syyu\n# pacman <span class="token operator">-</span>S archlinux<span class="token operator">-</span>keyring\n</code></pre>\n<h3 id="%E7%94%A8%E6%88%B7%E4%BB%A5%E5%8F%8A%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE">用户以及权限配置<a class="anchor" href="#%E7%94%A8%E6%88%B7%E4%BB%A5%E5%8F%8A%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE">§</a></h3>\n<p>添加用户</p>\n<pre class="language-autoit"><code class="language-autoit"># useradd <span class="token operator">-</span>m <span class="token operator">-</span>G wheel username\n</code></pre>\n<p>设置用户的密码</p>\n<pre class="language-autoit"><code class="language-autoit"># passwd username\n</code></pre>\n<p>安装 <code>sudo</code> 并使用 <code>visudo</code> 命令编辑 <code>/etc/sudoers</code> 文件，由于 <code>visudo</code> 命令默认使用的是 <code>vi</code> 来编辑，而系统中没有安装 <code>vi</code>，可以使用如下命令来指定 <code>visudo</code> 命令启动的编辑器</p>\n<pre class="language-autoit"><code class="language-autoit"># EDITOR<span class="token operator">=</span>vim visudo\n</code></pre>\n<p>此时会使用 <code>vim</code> 打开 <code>/etc/sudoers</code> 文件，需要将 <code># %whell ALL=(ALL)</code> 这一行取消注释</p>\n<blockquote>\n<p>建议不要直接编辑 <code>sudoers</code> 文件，使用 <code>visudo</code> 命令完成编辑退出时会自动检测文件的格式，确保 <code>sudo</code> 命令能够正常运行，否则可能会导致不可预料的错误。</p>\n</blockquote>\n<p>退出 root 账户，使用新创建的账户进入系统。</p>\n<h2 id="%E5%9B%BE%E5%BD%A2%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">图形环境配置<a class="anchor" href="#%E5%9B%BE%E5%BD%A2%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">§</a></h2>\n<p>安装 Xorg 相关组件</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S xorg\n</code></pre>\n<blockquote>\n<p>这里采用默认安装，可能会安装一些不需要的包，可根据自身需要精简。</p>\n</blockquote>\n<p>安装相应的显卡驱动，根据显卡型号选择，AMD 安装 <code>xf86-video-amdgpu</code>，Nvidia 安装 <code>nvidia</code></p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S nvidia\n</code></pre>\n<p>这里使用 Suckless 的窗口管理器 <a href="https://dwm.suckless.org/">dwm</a>，由于需要编译，安装必要的工具链。</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S make gcc pkg<span class="token operator">-</span>config libxft git\n</code></pre>\n<p>从 Suckless 官网克隆 dwm 的最新源码</p>\n<pre class="language-autoit"><code class="language-autoit">$ git clone https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>git<span class="token punctuation">.</span>suckless<span class="token punctuation">.</span>org<span class="token operator">/</span>dwm\n</code></pre>\n<p>进入 dwm 目录，由于不需要多屏幕支持，将 <code>config.mk</code> 文件中以下几行注释掉</p>\n<pre class="language-autoit"><code class="language-autoit">XINERAMALIBS  <span class="token operator">=</span> <span class="token operator">-</span>lXinerama\nXINERAMAFLAGS <span class="token operator">=</span> <span class="token operator">-</span>DXINERAMA\n</code></pre>\n<p>dwm 默认只提供最基本的功能，推荐使用以下 patch 获取更好的用户体验</p>\n<ul>\n<li><strong><a href="https://dwm.suckless.org/patches/alpha/">alpha</a></strong> - 使状态栏拥有透明效果</li>\n<li><strong><a href="https://dwm.suckless.org/patches/autostart/">autostart</a></strong> - dwm 启动时可以运行用户自定义的脚本</li>\n<li><strong><a href="https://dwm.suckless.org/patches/awesomebar/">awesomebar</a></strong> - 让任务栏拥有类似 awesome 的功能</li>\n<li><strong><a href="https://dwm.suckless.org/patches/fullscreen/">fullscreen</a></strong> - 使窗口拥有全屏功能</li>\n<li><strong><a href="https://dwm.suckless.org/patches/hide_vacant_tags/">hide vacant tags</a></strong> - 隐藏空标签</li>\n<li><strong><a href="https://dwm.suckless.org/patches/noborder/">noborder</a></strong> - 当前面屏幕只有一个窗口时隐藏边界</li>\n<li><strong><a href="https://dwm.suckless.org/patches/pertag/">pertag</a></strong> - 使不同标签下的窗口拥有不同的布局方式</li>\n<li><strong><a href="https://dwm.suckless.org/patches/vanitygaps/">vanitygaps</a></strong> - 让窗口拥有类似 i3-gaps 的功能</li>\n</ul>\n<p>编译源码完成安装</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo make <span class="token operator">&amp;</span><span class="token operator">&amp;</span> make clean install\n</code></pre>\n<p>编辑 <code>～/.xinitrc</code> 加入以下内容</p>\n<pre class="language-autoit"><code class="language-autoit">exec dwm\n</code></pre>\n<p>如果希望登陆时自动 X，可以采用以下方式</p>\n<ul>\n<li>如果使用 Bash，编辑 <code>～/.bash_profile</code></li>\n<li>如果使用 zsh，编辑 <code>～/.zprofile</code></li>\n</ul>\n<p>加入以下内容</p>\n<pre class="language-autoit"><code class="language-autoit"><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> ! <span class="token variable">$DISPLAY</span> <span class="token operator">&amp;</span><span class="token operator">&amp;</span> <span class="token variable">$XDG_VTNR</span> <span class="token operator">-</span>eq <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token comment">; then</span>\n  exec startx\nfi\n</code></pre>\n<p>启动 X</p>\n<pre class="language-autoit"><code class="language-autoit">$ startx\n</code></pre>\n<h2 id="%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E9%85%8D%E7%BD%AE">中文输入法配置<a class="anchor" href="#%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E9%85%8D%E7%BD%AE">§</a></h2>\n<p>安装 fcitx5</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5\n</code></pre>\n<p>安装中文输入法引擎</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>chinese<span class="token operator">-</span>addons\n</code></pre>\n<p>如果需要支持 Qt 或 GTK 程序，需要额外安装以下包</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>qt fcitx5<span class="token operator">-</span>gtk\n</code></pre>\n<p>添加中文词库</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>pinyin<span class="token operator">-</span>zhwiki fcitx5<span class="token operator">-</span>pinyin<span class="token operator">-</span>moegirl\n</code></pre>\n<p>安装 fcitx5 GUI 客户端配置工具</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>configtool\n</code></pre>\n<blockquote>\n<p>fcitx5 的配置文件位于 <code>～/.config/fcitx5</code>，如果有需要可以手动编辑。</p>\n</blockquote>\n<p>安装 fcitx5 的备选主题</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>material<span class="token operator">-</span>color\n</code></pre>\n<p>安装完成后可以在 fcitx5 的图形化配置界面更改主题</p>\n<p>配置 fcitx5 环境变量，在 <code>～/pam_environment</code> 文件中添加以下内容</p>\n<pre class="language-autoit"><code class="language-autoit">GTK_IM_MODULE <span class="token keyword">DEFAULT</span><span class="token operator">=</span>fcitx\nQT_IM_MODULE  <span class="token keyword">DEFAULT</span><span class="token operator">=</span>fcitx\nXMODIFIERS    <span class="token keyword">DEFAULT</span><span class="token operator">=</span>\<span class="token variable">@im</span><span class="token operator">=</span>fcitx\n</code></pre>\n<p>将 fcitx5 设置为随 X 一起启动，在 <code>~/.xinitrc</code> 中添加以下内容</p>\n<pre class="language-autoit"><code class="language-autoit">fcitx5 <span class="token operator">&amp;</span>\nsleep <span class="token number">2</span>\n</code></pre>\n<p><strong>fcitx5 在 IntelliJ 系列软件的 IDE 中会出现输入框位置不正确的错误，解决方式可参考以下链接</strong></p>\n<ul>\n<li><a href="https://bbs.archlinuxcn.org/viewtopic.php?pid=43982#p43982">fcitx输入法在Intellij IDEA开发工具中输入法候选框无法跟随光标</a></li>\n<li><a href="https://github.com/fcitx/fcitx5/issues/79">intellij 系列的 ide 中输入框位置不正确</a></li>\n</ul>\n<h2 id="%E8%BD%AF%E4%BB%B6%E5%8C%85">软件包<a class="anchor" href="#%E8%BD%AF%E4%BB%B6%E5%8C%85">§</a></h2>\n<p>以下为我自己在使用 Arch Linux 系统中常用的软件包</p>\n<h3 id="%E5%AD%97%E4%BD%93">字体<a class="anchor" href="#%E5%AD%97%E4%BD%93">§</a></h3>\n<ul>\n<li><strong>wqy-mircohei</strong></li>\n<li><strong>nerd-fonts-hack</strong></li>\n<li><strong>ttf-joypixels</strong></li>\n<li><strong>ttf-symbola</strong></li>\n</ul>\n<p><strong>终端相关</strong></p>\n<ul>\n<li><strong>alacritty</strong></li>\n<li><strong>ranger</strong></li>\n<li><strong>lazygit</strong></li>\n<li><strong>lazydocker</strong></li>\n<li><strong>neofetch</strong></li>\n<li><strong>htop</strong></li>\n<li><strong>mosh</strong></li>\n<li><strong>tmux</strong></li>\n<li><strong>ueberzug</strong></li>\n<li><strong>highlight</strong></li>\n<li><strong>fzf</strong></li>\n<li><strong>bc</strong></li>\n<li><strong>mdp</strong></li>\n<li><strong>ripgrep</strong></li>\n</ul>\n<h3 id="%E6%A1%8C%E9%9D%A2%E6%98%BE%E7%A4%BA">桌面显示<a class="anchor" href="#%E6%A1%8C%E9%9D%A2%E6%98%BE%E7%A4%BA">§</a></h3>\n<ul>\n<li><strong>feh</strong></li>\n<li><strong>picom</strong></li>\n</ul>\n<p><strong>编辑器</strong></p>\n<ul>\n<li><strong>neovim</strong></li>\n<li><strong>emacs</strong></li>\n</ul>\n<p><strong>科学上网</strong></p>\n<ul>\n<li><strong>clash</strong></li>\n<li><strong>proxychians-ng</strong></li>\n</ul>\n<p><strong>聊天工具</strong></p>\n<ul>\n<li><strong>telegram</strong></li>\n<li><strong>discord</strong></li>\n</ul>\n<p><strong>其他</strong></p>\n<ul>\n<li><strong>screenkey</strong></li>\n<li><strong>albert</strong></li>\n<li><strong>aria2</strong></li>\n<li><strong>yay</strong></li>\n<li><strong>trayer</strong></li>\n</ul>\n<p>以上某些软件包需要配置，具体的配置方法可参考 <a href="https://github.com/geekya215/dotfiles">dotfiles</a></p>'
        } }),
    'head': null,
    'script': React.createElement(React.Fragment, null,
        React.createElement("script", { src: "https://cdn.pagic.org/react@16.13.1/umd/react.production.min.js" }),
        React.createElement("script", { src: "https://cdn.pagic.org/react-dom@16.13.1/umd/react-dom.production.min.js" }),
        React.createElement("script", { src: "/index.js", type: "module" })),
    'contentTitle': React.createElement("h1", { key: "0" }, "Arch Linux \u5B8C\u5168\u6307\u5317"),
    'contentBody': React.createElement("article", { dangerouslySetInnerHTML: {
            __html: '<p>此文为博主自身在安装 Arch Linux 过程中的总结。主要参考 <a href="https://wiki.archlinux.org/">Arch Wiki</a>，本文章具有一定时效性，里面的内容可能在以后的某个时间失效。\n如果遇到错误，请参考最新版本的官方文档，或通过通过网络寻求帮助。</p>\n<p><strong>本文默认安装单系统，有线网络环境，系统使用 UEFI 模式启动，禁用 Secure Boot。</strong></p>\n<h2 id="%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87">安装前准备<a class="anchor" href="#%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87">§</a></h2>\n<ul>\n<li>下载安装镜像，推荐使用国内清华大学镜像站（<a href="https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest/">TUNA</a>），也可以通过 <a href="https://archlinux.org/download/">Arch 官方下载页面</a>，选择最符合自己网络状况的镜像站。</li>\n<li>下载完毕后，需要将镜像文件刻录至U盘中，Linux 下可以使用 <code>dd</code> 命令完成，Windows 平台下推荐使用 <a href="https://rufus.ie/">Rufus</a>。</li>\n</ul>\n<h2 id="%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85">开始安装<a class="anchor" href="#%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85">§</a></h2>\n<p>插入刚刚完成刻录的U盘，在开机时选择从U盘启动。通过 Arch 的引导界面进入 Live 环境。</p>\n<h3 id="%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5">网络检查<a class="anchor" href="#%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5">§</a></h3>\n<p>进入环境后，检查网络接口</p>\n<pre class="language-autoit"><code class="language-autoit"># ip link\n</code></pre>\n<p>使用 <code>ping</code> 命令检查网络</p>\n<pre class="language-autoit"><code class="language-autoit"># ping www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com\n</code></pre>\n<h3 id="%E5%90%8C%E6%AD%A5%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4">同步系统时间<a class="anchor" href="#%E5%90%8C%E6%AD%A5%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4">§</a></h3>\n<p>更新系统时钟</p>\n<pre class="language-autoit"><code class="language-autoit"># timedatectl set<span class="token operator">-</span>ntp <span class="token boolean">true</span>\n</code></pre>\n<p>完成设置后可以使用如下命令查看服务状态</p>\n<pre class="language-autoit"><code class="language-autoit"># timedatectl status\n</code></pre>\n<h3 id="%E5%88%86%E5%8C%BA%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8F%8A%E6%8C%82%E8%BD%BD">分区格式化及挂载<a class="anchor" href="#%E5%88%86%E5%8C%BA%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8F%8A%E6%8C%82%E8%BD%BD">§</a></h3>\n<p>查看系统磁盘当前状态</p>\n<pre class="language-autoit"><code class="language-autoit"># fdisk <span class="token operator">-</span>l\n</code></pre>\n<p>或者</p>\n<pre class="language-autoit"><code class="language-autoit"># lsblk\n</code></pre>\n<p>如果硬盘被成功识别，会出现 <code>/dev/sda</code>， <code>/dev/nvme0n1</code> 之类的硬盘设备文件。这里假设硬盘设备为 <code>/dev/sda</code>。采用最基本的分区方式。</p>\n<p>使用 <code>cfdisk</code> 命令进行分区，也可使用 <code>parted</code>，根据个人喜好选择。</p>\n<pre class="language-autoit"><code class="language-autoit"># cfdisk <span class="token operator">/</span>dev<span class="token operator">/</span>sda\n</code></pre>\n<p>分区方式如下：</p>\n<div class="table_wrapper"><table>\n<thead>\n<tr>\n<th>分区类型</th>\n<th>分区</th>\n<th>分区大小</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>efi分区</td>\n<td>/dev/sda1</td>\n<td>512M</td>\n</tr>\n<tr>\n<td>swap分区</td>\n<td>/dev/sda2</td>\n<td>实际内存大小</td>\n</tr>\n<tr>\n<td>root分区</td>\n<td>/dev/sda3</td>\n<td>磁盘剩余空间</td>\n</tr>\n</tbody>\n</table></div>\n<p>格式化分区</p>\n<pre class="language-autoit"><code class="language-autoit"># mkfs<span class="token punctuation">.</span>vfat <span class="token operator">-</span>F32 <span class="token operator">/</span>dev<span class="token operator">/</span>sda1\n# mkfs<span class="token punctuation">.</span>swap <span class="token operator">/</span>dev<span class="token operator">/</span>sda2\n# swapon <span class="token operator">/</span>dev<span class="token operator">/</span>sda2\n# mkfs<span class="token punctuation">.</span>ext4 <span class="token operator">/</span>dev<span class="token operator">/</span>sda3\n</code></pre>\n<p>挂载格式化完成的分区</p>\n<pre class="language-autoit"><code class="language-autoit"># mount <span class="token operator">/</span>dev<span class="token operator">/</span>sda3 <span class="token operator">/</span>mnt\n# mkdir <span class="token operator">/</span>mnt<span class="token operator">/</span>boot\n# mount <span class="token operator">/</span>dev<span class="token operator">/</span>sda1 <span class="token operator">/</span>mnt<span class="token operator">/</span>boot\n</code></pre>\n<p>挂载完毕后可以使用 <code>df</code> 命令查看挂载是否正确</p>\n<h3 id="%E6%9B%B4%E6%94%B9%E9%95%9C%E5%83%8F%E6%BA%90">更改镜像源<a class="anchor" href="#%E6%9B%B4%E6%94%B9%E9%95%9C%E5%83%8F%E6%BA%90">§</a></h3>\n<p>查看 <code>/etc/pacman.d/mirrorlist</code> 文件，将最符合当前网络状况的镜像网址放在列表的最前。</p>\n<h3 id="%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F">安装系统<a class="anchor" href="#%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F">§</a></h3>\n<pre class="language-autoit"><code class="language-autoit"># pacstrap <span class="token operator">/</span>mnt base linux linux<span class="token operator">-</span>firmware\n</code></pre>\n<h3 id="%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F">配置系统<a class="anchor" href="#%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F">§</a></h3>\n<p>生成 fstab 文件</p>\n<pre class="language-autoit"><code class="language-autoit"># genfstab <span class="token operator">-</span>U <span class="token operator">/</span>mnt <span class="token operator">></span><span class="token operator">></span> <span class="token operator">/</span>mnt<span class="token operator">/</span>etc<span class="token operator">/</span>fstab\n</code></pre>\n<p>查看生成的 fstab 文件是否正确</p>\n<pre class="language-autoit"><code class="language-autoit"># cat <span class="token operator">/</span>mnt<span class="token operator">/</span>etc<span class="token operator">/</span>fstab\n</code></pre>\n<p>进入新安装的系统环境</p>\n<pre class="language-autoit"><code class="language-autoit"># arch<span class="token operator">-</span>chroot <span class="token operator">/</span>mnt\n</code></pre>\n<blockquote>\n<p>因为后面有些配置需要操作文本，这里可以先安装 vim 方便后面编辑</p>\n</blockquote>\n<p>设置时区</p>\n<pre class="language-autoit"><code class="language-autoit"># ln <span class="token operator">-</span>sf <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>zoneinfo<span class="token operator">/</span>Asia<span class="token operator">/</span>Shanghai <span class="token operator">/</span>etc<span class="token operator">/</span>localtime\n</code></pre>\n<p>生成 <code>/etc/adjtime</code></p>\n<pre class="language-autoit"><code class="language-autoit"># hwclock <span class="token operator">-</span><span class="token operator">-</span>systohc\n</code></pre>\n<p>编辑 <code>/etc/locale.gen</code>，去掉 <code>en_US.UTF-8 UTF-8</code> 这一行的注释。</p>\n<blockquote>\n<p>因为使用中文字体会导致 tty 出现错误，这里只使用英文字体</p>\n</blockquote>\n<p>生成 locale 信息</p>\n<pre class="language-autoit"><code class="language-autoit"># locale<span class="token operator">-</span>gen\n</code></pre>\n<p>创建 <code>locale.conf</code> 并在文件中加入 <code>LANG=en_US.UTF-8</code></p>\n<h3 id="%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE">网络配置<a class="anchor" href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE">§</a></h3>\n<p>设置主机名</p>\n<pre class="language-autoit"><code class="language-autoit"># echo hostname <span class="token operator">></span><span class="token operator">></span> <span class="token operator">/</span>etc<span class="token operator">/</span>hostname\n</code></pre>\n<p>创建 <code>/etc/hosts</code> 并加入以下内容</p>\n<pre class="language-autoit"><code class="language-autoit"><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span>  localhost\n<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">1</span>    localhost\n<span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">1.1</span>  myhostname<span class="token punctuation">.</span>localdomain  myhostname\n</code></pre>\n<p>安装 <code>dhcpcd</code> 并启用</p>\n<pre class="language-autoit"><code class="language-autoit"># pacman <span class="token operator">-</span>S dhcpcd\n# systemctl enable dhcpcd\n# systemctl start dhcpcd\n</code></pre>\n<h3 id="%E5%BC%95%E5%AF%BC%E9%85%8D%E7%BD%AE">引导配置<a class="anchor" href="#%E5%BC%95%E5%AF%BC%E9%85%8D%E7%BD%AE">§</a></h3>\n<p>安装引导工具包以及 CPU 微码。微码需要根据自己使用的 CPU 来选择。Intel 用户安装 <code>intel-ucode</code>，AMD 用户安装 <code>amd-ucode</code>。</p>\n<pre class="language-autoit"><code class="language-autoit"># pacman <span class="token operator">-</span>S grub efibootmgr\n# pacman <span class="token operator">-</span>S amd<span class="token operator">-</span>ucode\n</code></pre>\n<p>安装 GRUB</p>\n<pre class="language-autoit"><code class="language-autoit"># grub<span class="token operator">-</span>install <span class="token operator">-</span><span class="token operator">-</span>target<span class="token operator">=</span>x86_64<span class="token operator">-</span>efi <span class="token operator">-</span><span class="token operator">-</span>efi<span class="token operator">-</span>directory<span class="token operator">=</span><span class="token operator">/</span>boot <span class="token operator">-</span><span class="token operator">-</span>bootloader<span class="token operator">-</span>id<span class="token operator">=</span>GRUB\n</code></pre>\n<p>生成主配置文件</p>\n<pre class="language-autoit"><code class="language-autoit"># grub<span class="token operator">-</span>mkconfig <span class="token operator">-</span>o <span class="token operator">/</span>boot<span class="token operator">/</span>grub<span class="token operator">/</span>grub<span class="token punctuation">.</span>cfg\n</code></pre>\n<h3 id="%E6%9D%82%E9%A1%B9">杂项<a class="anchor" href="#%E6%9D%82%E9%A1%B9">§</a></h3>\n<p>给 root 用户设置密码以便重启后登陆</p>\n<pre class="language-autoit"><code class="language-autoit"># passwd\n</code></pre>\n<p>退出 chroot 环境</p>\n<pre class="language-autoit"><code class="language-autoit"># <span class="token keyword">exit</span>\n</code></pre>\n<p>卸载挂载的分区</p>\n<pre class="language-autoit"><code class="language-autoit"># umount <span class="token operator">-</span>R <span class="token operator">/</span>mnt\n</code></pre>\n<p>重启系统</p>\n<pre class="language-autoit"><code class="language-autoit"># reboot\n</code></pre>\n<h2 id="%E6%96%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">新系统的基本配置<a class="anchor" href="#%E6%96%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">§</a></h2>\n<p>重启完成后使用 root 账户和刚刚设置的密码进入系统，首先通过 <code>ping</code> 命令测试网络是否已连接，如果未能连接，查看 <code>dhcpcd</code> 的服务是否正常运行。</p>\n<p>更新软件仓库</p>\n<pre class="language-autoit"><code class="language-autoit"># pacman <span class="token operator">-</span>Syyu\n</code></pre>\n<h3 id="%E9%85%8D%E7%BD%AE-archlinuxcn-%E4%BB%93%E5%BA%93">配置 Archlinuxcn 仓库<a class="anchor" href="#%E9%85%8D%E7%BD%AE-archlinuxcn-%E4%BB%93%E5%BA%93">§</a></h3>\n<p>在 <code>/etc/pacman.conf</code> 文件底部加入以下内容</p>\n<pre class="language-autoit"><code class="language-autoit"><span class="token punctuation">[</span>archlinuxcn<span class="token punctuation">]</span>\nServer <span class="token operator">=</span> https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>archlinuxcn<span class="token operator">/</span><span class="token variable">$arch</span>\n</code></pre>\n<p>刷新软件仓库并安装 <code>archlinuxcn-keyring</code> 导入 <code>GPG-key</code></p>\n<pre class="language-autoit"><code class="language-autoit"># pacman <span class="token operator">-</span>Syyu\n# pacman <span class="token operator">-</span>S archlinux<span class="token operator">-</span>keyring\n</code></pre>\n<h3 id="%E7%94%A8%E6%88%B7%E4%BB%A5%E5%8F%8A%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE">用户以及权限配置<a class="anchor" href="#%E7%94%A8%E6%88%B7%E4%BB%A5%E5%8F%8A%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE">§</a></h3>\n<p>添加用户</p>\n<pre class="language-autoit"><code class="language-autoit"># useradd <span class="token operator">-</span>m <span class="token operator">-</span>G wheel username\n</code></pre>\n<p>设置用户的密码</p>\n<pre class="language-autoit"><code class="language-autoit"># passwd username\n</code></pre>\n<p>安装 <code>sudo</code> 并使用 <code>visudo</code> 命令编辑 <code>/etc/sudoers</code> 文件，由于 <code>visudo</code> 命令默认使用的是 <code>vi</code> 来编辑，而系统中没有安装 <code>vi</code>，可以使用如下命令来指定 <code>visudo</code> 命令启动的编辑器</p>\n<pre class="language-autoit"><code class="language-autoit"># EDITOR<span class="token operator">=</span>vim visudo\n</code></pre>\n<p>此时会使用 <code>vim</code> 打开 <code>/etc/sudoers</code> 文件，需要将 <code># %whell ALL=(ALL)</code> 这一行取消注释</p>\n<blockquote>\n<p>建议不要直接编辑 <code>sudoers</code> 文件，使用 <code>visudo</code> 命令完成编辑退出时会自动检测文件的格式，确保 <code>sudo</code> 命令能够正常运行，否则可能会导致不可预料的错误。</p>\n</blockquote>\n<p>退出 root 账户，使用新创建的账户进入系统。</p>\n<h2 id="%E5%9B%BE%E5%BD%A2%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">图形环境配置<a class="anchor" href="#%E5%9B%BE%E5%BD%A2%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">§</a></h2>\n<p>安装 Xorg 相关组件</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S xorg\n</code></pre>\n<blockquote>\n<p>这里采用默认安装，可能会安装一些不需要的包，可根据自身需要精简。</p>\n</blockquote>\n<p>安装相应的显卡驱动，根据显卡型号选择，AMD 安装 <code>xf86-video-amdgpu</code>，Nvidia 安装 <code>nvidia</code></p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S nvidia\n</code></pre>\n<p>这里使用 Suckless 的窗口管理器 <a href="https://dwm.suckless.org/">dwm</a>，由于需要编译，安装必要的工具链。</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S make gcc pkg<span class="token operator">-</span>config libxft git\n</code></pre>\n<p>从 Suckless 官网克隆 dwm 的最新源码</p>\n<pre class="language-autoit"><code class="language-autoit">$ git clone https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>git<span class="token punctuation">.</span>suckless<span class="token punctuation">.</span>org<span class="token operator">/</span>dwm\n</code></pre>\n<p>进入 dwm 目录，由于不需要多屏幕支持，将 <code>config.mk</code> 文件中以下几行注释掉</p>\n<pre class="language-autoit"><code class="language-autoit">XINERAMALIBS  <span class="token operator">=</span> <span class="token operator">-</span>lXinerama\nXINERAMAFLAGS <span class="token operator">=</span> <span class="token operator">-</span>DXINERAMA\n</code></pre>\n<p>dwm 默认只提供最基本的功能，推荐使用以下 patch 获取更好的用户体验</p>\n<ul>\n<li><strong><a href="https://dwm.suckless.org/patches/alpha/">alpha</a></strong> - 使状态栏拥有透明效果</li>\n<li><strong><a href="https://dwm.suckless.org/patches/autostart/">autostart</a></strong> - dwm 启动时可以运行用户自定义的脚本</li>\n<li><strong><a href="https://dwm.suckless.org/patches/awesomebar/">awesomebar</a></strong> - 让任务栏拥有类似 awesome 的功能</li>\n<li><strong><a href="https://dwm.suckless.org/patches/fullscreen/">fullscreen</a></strong> - 使窗口拥有全屏功能</li>\n<li><strong><a href="https://dwm.suckless.org/patches/hide_vacant_tags/">hide vacant tags</a></strong> - 隐藏空标签</li>\n<li><strong><a href="https://dwm.suckless.org/patches/noborder/">noborder</a></strong> - 当前面屏幕只有一个窗口时隐藏边界</li>\n<li><strong><a href="https://dwm.suckless.org/patches/pertag/">pertag</a></strong> - 使不同标签下的窗口拥有不同的布局方式</li>\n<li><strong><a href="https://dwm.suckless.org/patches/vanitygaps/">vanitygaps</a></strong> - 让窗口拥有类似 i3-gaps 的功能</li>\n</ul>\n<p>编译源码完成安装</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo make <span class="token operator">&amp;</span><span class="token operator">&amp;</span> make clean install\n</code></pre>\n<p>编辑 <code>～/.xinitrc</code> 加入以下内容</p>\n<pre class="language-autoit"><code class="language-autoit">exec dwm\n</code></pre>\n<p>如果希望登陆时自动 X，可以采用以下方式</p>\n<ul>\n<li>如果使用 Bash，编辑 <code>～/.bash_profile</code></li>\n<li>如果使用 zsh，编辑 <code>～/.zprofile</code></li>\n</ul>\n<p>加入以下内容</p>\n<pre class="language-autoit"><code class="language-autoit"><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> ! <span class="token variable">$DISPLAY</span> <span class="token operator">&amp;</span><span class="token operator">&amp;</span> <span class="token variable">$XDG_VTNR</span> <span class="token operator">-</span>eq <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token comment">; then</span>\n  exec startx\nfi\n</code></pre>\n<p>启动 X</p>\n<pre class="language-autoit"><code class="language-autoit">$ startx\n</code></pre>\n<h2 id="%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E9%85%8D%E7%BD%AE">中文输入法配置<a class="anchor" href="#%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E9%85%8D%E7%BD%AE">§</a></h2>\n<p>安装 fcitx5</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5\n</code></pre>\n<p>安装中文输入法引擎</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>chinese<span class="token operator">-</span>addons\n</code></pre>\n<p>如果需要支持 Qt 或 GTK 程序，需要额外安装以下包</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>qt fcitx5<span class="token operator">-</span>gtk\n</code></pre>\n<p>添加中文词库</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>pinyin<span class="token operator">-</span>zhwiki fcitx5<span class="token operator">-</span>pinyin<span class="token operator">-</span>moegirl\n</code></pre>\n<p>安装 fcitx5 GUI 客户端配置工具</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>configtool\n</code></pre>\n<blockquote>\n<p>fcitx5 的配置文件位于 <code>～/.config/fcitx5</code>，如果有需要可以手动编辑。</p>\n</blockquote>\n<p>安装 fcitx5 的备选主题</p>\n<pre class="language-autoit"><code class="language-autoit">$ sudo pacman <span class="token operator">-</span>S fcitx5<span class="token operator">-</span>material<span class="token operator">-</span>color\n</code></pre>\n<p>安装完成后可以在 fcitx5 的图形化配置界面更改主题</p>\n<p>配置 fcitx5 环境变量，在 <code>～/pam_environment</code> 文件中添加以下内容</p>\n<pre class="language-autoit"><code class="language-autoit">GTK_IM_MODULE <span class="token keyword">DEFAULT</span><span class="token operator">=</span>fcitx\nQT_IM_MODULE  <span class="token keyword">DEFAULT</span><span class="token operator">=</span>fcitx\nXMODIFIERS    <span class="token keyword">DEFAULT</span><span class="token operator">=</span>\<span class="token variable">@im</span><span class="token operator">=</span>fcitx\n</code></pre>\n<p>将 fcitx5 设置为随 X 一起启动，在 <code>~/.xinitrc</code> 中添加以下内容</p>\n<pre class="language-autoit"><code class="language-autoit">fcitx5 <span class="token operator">&amp;</span>\nsleep <span class="token number">2</span>\n</code></pre>\n<p><strong>fcitx5 在 IntelliJ 系列软件的 IDE 中会出现输入框位置不正确的错误，解决方式可参考以下链接</strong></p>\n<ul>\n<li><a href="https://bbs.archlinuxcn.org/viewtopic.php?pid=43982#p43982">fcitx输入法在Intellij IDEA开发工具中输入法候选框无法跟随光标</a></li>\n<li><a href="https://github.com/fcitx/fcitx5/issues/79">intellij 系列的 ide 中输入框位置不正确</a></li>\n</ul>\n<h2 id="%E8%BD%AF%E4%BB%B6%E5%8C%85">软件包<a class="anchor" href="#%E8%BD%AF%E4%BB%B6%E5%8C%85">§</a></h2>\n<p>以下为我自己在使用 Arch Linux 系统中常用的软件包</p>\n<h3 id="%E5%AD%97%E4%BD%93">字体<a class="anchor" href="#%E5%AD%97%E4%BD%93">§</a></h3>\n<ul>\n<li><strong>wqy-mircohei</strong></li>\n<li><strong>nerd-fonts-hack</strong></li>\n<li><strong>ttf-joypixels</strong></li>\n<li><strong>ttf-symbola</strong></li>\n</ul>\n<p><strong>终端相关</strong></p>\n<ul>\n<li><strong>alacritty</strong></li>\n<li><strong>ranger</strong></li>\n<li><strong>lazygit</strong></li>\n<li><strong>lazydocker</strong></li>\n<li><strong>neofetch</strong></li>\n<li><strong>htop</strong></li>\n<li><strong>mosh</strong></li>\n<li><strong>tmux</strong></li>\n<li><strong>ueberzug</strong></li>\n<li><strong>highlight</strong></li>\n<li><strong>fzf</strong></li>\n<li><strong>bc</strong></li>\n<li><strong>mdp</strong></li>\n<li><strong>ripgrep</strong></li>\n</ul>\n<h3 id="%E6%A1%8C%E9%9D%A2%E6%98%BE%E7%A4%BA">桌面显示<a class="anchor" href="#%E6%A1%8C%E9%9D%A2%E6%98%BE%E7%A4%BA">§</a></h3>\n<ul>\n<li><strong>feh</strong></li>\n<li><strong>picom</strong></li>\n</ul>\n<p><strong>编辑器</strong></p>\n<ul>\n<li><strong>neovim</strong></li>\n<li><strong>emacs</strong></li>\n</ul>\n<p><strong>科学上网</strong></p>\n<ul>\n<li><strong>clash</strong></li>\n<li><strong>proxychians-ng</strong></li>\n</ul>\n<p><strong>聊天工具</strong></p>\n<ul>\n<li><strong>telegram</strong></li>\n<li><strong>discord</strong></li>\n</ul>\n<p><strong>其他</strong></p>\n<ul>\n<li><strong>screenkey</strong></li>\n<li><strong>albert</strong></li>\n<li><strong>aria2</strong></li>\n<li><strong>yay</strong></li>\n<li><strong>trayer</strong></li>\n</ul>\n<p>以上某些软件包需要配置，具体的配置方法可参考 <a href="https://github.com/geekya215/dotfiles">dotfiles</a></p>'
        } }),
    'toc': React.createElement("aside", { dangerouslySetInnerHTML: {
            __html: '<nav class="toc"><ol><li><a href="#%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87">安装前准备</a></li><li><a href="#%E5%BC%80%E5%A7%8B%E5%AE%89%E8%A3%85">开始安装</a><ol><li><a href="#%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5">网络检查</a></li><li><a href="#%E5%90%8C%E6%AD%A5%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4">同步系统时间</a></li><li><a href="#%E5%88%86%E5%8C%BA%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%8F%8A%E6%8C%82%E8%BD%BD">分区格式化及挂载</a></li><li><a href="#%E6%9B%B4%E6%94%B9%E9%95%9C%E5%83%8F%E6%BA%90">更改镜像源</a></li><li><a href="#%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F">安装系统</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F">配置系统</a></li><li><a href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE">网络配置</a></li><li><a href="#%E5%BC%95%E5%AF%BC%E9%85%8D%E7%BD%AE">引导配置</a></li><li><a href="#%E6%9D%82%E9%A1%B9">杂项</a></li></ol></li><li><a href="#%E6%96%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE">新系统的基本配置</a><ol><li><a href="#%E9%85%8D%E7%BD%AE-archlinuxcn-%E4%BB%93%E5%BA%93">配置 Archlinuxcn 仓库</a></li><li><a href="#%E7%94%A8%E6%88%B7%E4%BB%A5%E5%8F%8A%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE">用户以及权限配置</a></li></ol></li><li><a href="#%E5%9B%BE%E5%BD%A2%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">图形环境配置</a></li><li><a href="#%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E9%85%8D%E7%BD%AE">中文输入法配置</a></li><li><a href="#%E8%BD%AF%E4%BB%B6%E5%8C%85">软件包</a><ol><li><a href="#%E5%AD%97%E4%BD%93">字体</a></li><li><a href="#%E6%A1%8C%E9%9D%A2%E6%98%BE%E7%A4%BA">桌面显示</a></li></ol></li></ol></nav>'
        } }),
    'author': "geekya215",
    'contributors': [
        "Lin Yang"
    ],
    'date': "2021-01-19T00:00:00.000Z",
    'updated': "2021-01-31T03:54:42.000Z",
    'excerpt': "此文为博主自身在安装 Arch Linux 过程中的总结。主要参考 Arch Wiki，本文章具有一定时效性，里面的内容可能在以后的某个时间失效。 如果遇到错误，请参考最新版本的官方文档，或通过通过网络寻求帮助。 本文默认安装单系统，...",
    'cover': undefined,
    'categories': [
        "Linux"
    ],
    'tags': [
        "总结思考"
    ],
    'blog': {
        "isPost": true,
        "posts": [
            {
                "pagePath": "posts/archlinux_tutorial.md",
                "title": "Arch Linux 完全指北",
                "link": "posts/archlinux_tutorial.html",
                "date": "2021-01-19T00:00:00.000Z",
                "updated": "2021-01-31T03:54:42.000Z",
                "author": "geekya215",
                "contributors": [
                    "Lin Yang"
                ],
                "categories": [
                    "Linux"
                ],
                "tags": [
                    "总结思考"
                ],
                "excerpt": "此文为博主自身在安装 Arch Linux 过程中的总结。主要参考 Arch Wiki，本文章具有一定时效性，里面的内容可能在以后的某个时间失效。 如果遇到错误，请参考最新版本的官方文档，或通过通过网络寻求帮助。 本文默认安装单系统，..."
            }
        ],
        "categories": [
            {
                "name": "Linux",
                "count": 1
            }
        ],
        "tags": [
            {
                "name": "总结思考",
                "count": 1
            }
        ]
    }
};
